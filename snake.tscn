[gd_scene load_steps=12 format=3 uid="uid://g5nflgm85d00"]

[ext_resource type="Script" uid="uid://bamxxch4ymj2a" path="res://CharacterController.gd" id="1_1e7on"]
[ext_resource type="Texture2D" uid="uid://blls4ng0v35xa" path="res://ProtoWings3.png" id="2_2le05"]
[ext_resource type="Texture2D" uid="uid://64njo0ov7or0" path="res://ProtoWings.png" id="3_pcnby"]
[ext_resource type="Texture2D" uid="uid://da6pn4xad4uyn" path="res://ProtoWings2.png" id="4_pbf10"]
[ext_resource type="Script" uid="uid://s2tlo73ay1aa" path="res://wingAnimate.gd" id="5_auwb3"]
[ext_resource type="Texture2D" uid="uid://b76rc1ncx45my" path="res://SnakeHead.png" id="6_7s7td"]
[ext_resource type="Texture2D" uid="uid://b6joc1t63tb" path="res://SnakeBody.png" id="7_at2r6"]
[ext_resource type="Texture2D" uid="uid://ci06mh845ack6" path="res://SnakeTail.png" id="8_mw6jq"]

[sub_resource type="CircleShape2D" id="CircleShape2D_wcp6f"]
radius = 92.0054

[sub_resource type="SpriteFrames" id="SpriteFrames_cqtek"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("2_2le05")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 0.6,
"texture": ExtResource("3_pcnby")
}, {
"duration": 0.4,
"texture": ExtResource("4_pbf10")
}, {
"duration": 0.5,
"texture": ExtResource("2_2le05")
}],
"loop": false,
"name": &"flap",
"speed": 5.0
}]

[sub_resource type="RectangleShape2D" id="RectangleShape2D_bfios"]
size = Vector2(32, 52)

[node name="Snake" type="Node2D"]

[node name="Head" type="RigidBody2D" parent="."]
mass = 3.0
script = ExtResource("1_1e7on")

[node name="HeadDetector" type="Area2D" parent="Head"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Head/HeadDetector"]
shape = SubResource("CircleShape2D_wcp6f")
debug_color = Color(2.88785e-06, 0.623099, 0.263259, 0.42)

[node name="Wings" type="AnimatedSprite2D" parent="Head"]
position = Vector2(9, -51)
sprite_frames = SubResource("SpriteFrames_cqtek")
animation = &"flap"
autoplay = "default"
frame = 2
frame_progress = 1.0
script = ExtResource("5_auwb3")

[node name="Sprite2D" type="Sprite2D" parent="Head"]
texture = ExtResource("6_7s7td")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Head"]
polygon = PackedVector2Array(12, 32, 26, 33, 37, 24, 37, 17, 45, 14, 48, 8, 48, -7, 42, -20, 32, -31, 18, -36, 4, -36, -7, -33, -20, -29, -31, -22, -39, -19, -47, -19, -47, 7, -47, 33, -5, 33)

[node name="PinJoint2D" type="PinJoint2D" parent="."]
position = Vector2(-49, 7)
node_a = NodePath("../Head")
node_b = NodePath("../BodySegment1")

[node name="BodySegment1" type="RigidBody2D" parent="."]
position = Vector2(-65, 7)
mass = 0.25

[node name="Sprite2D" type="Sprite2D" parent="BodySegment1"]
texture = ExtResource("7_at2r6")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BodySegment1"]
shape = SubResource("RectangleShape2D_bfios")

[node name="PinJoint2D2" type="PinJoint2D" parent="."]
position = Vector2(-82, 7)
node_a = NodePath("../BodySegment1")
node_b = NodePath("../BodySegment2")

[node name="BodySegment2" type="RigidBody2D" parent="."]
position = Vector2(-100, 7)
mass = 0.25

[node name="Sprite2D" type="Sprite2D" parent="BodySegment2"]
texture = ExtResource("7_at2r6")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BodySegment2"]
shape = SubResource("RectangleShape2D_bfios")

[node name="PinJoint2D3" type="PinJoint2D" parent="."]
position = Vector2(-117, 7)
node_a = NodePath("../BodySegment2")
node_b = NodePath("../BodySegment3")

[node name="BodySegment3" type="RigidBody2D" parent="."]
position = Vector2(-135, 7)
mass = 0.25

[node name="Sprite2D" type="Sprite2D" parent="BodySegment3"]
texture = ExtResource("7_at2r6")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BodySegment3"]
shape = SubResource("RectangleShape2D_bfios")

[node name="PinJoint2D4" type="PinJoint2D" parent="."]
position = Vector2(-152, 7)
node_a = NodePath("../BodySegment3")
node_b = NodePath("../BodySegment4")

[node name="BodySegment4" type="RigidBody2D" parent="."]
position = Vector2(-170, 7)
mass = 0.25

[node name="Sprite2D" type="Sprite2D" parent="BodySegment4"]
texture = ExtResource("7_at2r6")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BodySegment4"]
shape = SubResource("RectangleShape2D_bfios")

[node name="PinJoint2D5" type="PinJoint2D" parent="."]
position = Vector2(-187, 7)
node_a = NodePath("../BodySegment4")
node_b = NodePath("../BodySegment5")

[node name="BodySegment5" type="RigidBody2D" parent="."]
position = Vector2(-205, 7)
mass = 0.25

[node name="Sprite2D" type="Sprite2D" parent="BodySegment5"]
texture = ExtResource("7_at2r6")

[node name="CollisionShape2D" type="CollisionShape2D" parent="BodySegment5"]
shape = SubResource("RectangleShape2D_bfios")

[node name="PinJoint2D6" type="PinJoint2D" parent="."]
position = Vector2(-220, 7)
node_a = NodePath("../BodySegment5")
node_b = NodePath("../Tail")

[node name="Tail" type="RigidBody2D" parent="."]
position = Vector2(-267, 7)

[node name="Sprite2D" type="Sprite2D" parent="Tail"]
texture = ExtResource("8_mw6jq")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Tail"]
polygon = PackedVector2Array(44, 25, 24, 25, -11, 10, -29, 10, -39, 4, -44, 2, -44, -1, -31, -8, -21, -11, -1, -11, 8, -13, 26, -22, 29, -22, 38, -25, 44, -25, 44, 19)

[node name="TailDetector" type="Area2D" parent="Tail"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Tail/TailDetector"]
shape = SubResource("CircleShape2D_wcp6f")
debug_color = Color(2.88785e-06, 0.623099, 0.263259, 0.42)

[connection signal="flap" from="Head" to="Head/Wings" method="_on_head_flap"]
[connection signal="animation_finished" from="Head/Wings" to="Head/Wings" method="_on_animation_finished"]
